{"version":3,"sources":["hooks/useClientDimensions.js","styles/index.js","utils/index.js","classes/Square.js","classes/Piece.js","data/index.js","classes/Game.js","rules/pawn.js","rules/index.js","rules/select.js","App.js","index.js"],"names":["useClientDimensions","getClientDimensions","useCallback","vw","window","innerWidth","vh","innerHeight","useState","dimensions","setDimensions","handleResize","useEffect","addEventListener","removeEventListener","fullVS","width","height","center","display","justifyContent","alignItems","fRow","flexDirection","c","stylizer","arr","reduce","acc","val","Square","row","col","piece","this","isLight","up","down","left","right","Piece","player","square","name","symbol","pieces","specialRow","Game","board","i","j","setPiece","push","setNeighbours","movePawn","clickedPiece","nextSquare","moveSuccessfully","currentSquare","player1Rule","player2Rule","noPieceMovement","player1Attack","player2Attack","attackingMovement","rule","movePiece","setClickedPiece","setPlayer1Turn","removePiece","changeSquare","prev","selectPiece","p1Turn","setClicked","App","game","player1Turn","handleClick","style","background","map","id","key","onClick","cursor","position","fontSize","color","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e6dbbc96.chunk.js","sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\n\nconst useClientDimensions = () => {\n  const getClientDimensions = useCallback(\n    () => ({\n      vw: window.innerWidth,\n      vh: window.innerHeight\n    }),\n    []\n  );\n\n  const [dimensions, setDimensions] = useState(getClientDimensions());\n\n  const handleResize = useCallback(() => setDimensions(getClientDimensions()), [\n    getClientDimensions\n  ]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [handleResize]);\n\n  return dimensions;\n};\n\nexport default useClientDimensions;\n","export const fullVS = {\n  width: \"100vw\",\n  height: \"100vh\"\n};\n\nexport const center = {\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n};\n\nexport const testBG = {\n  background: \"#ed5\"\n};\n\nexport const fRow = {\n  display: \"flex\",\n  flexDirection: \"row\"\n};\n\nexport const c = {\n  blue: \"#5096F3\",\n  white: \"#EFF5FD\",\n  black: \"#000000\",\n  red: \"#CC0000\",\n  gray: \"#545454\",\n  lBlack: \"#454545\",\n  lRed: \"#D94545\"\n};\n","export const stylizer = arr =>\n  arr.reduce(\n    (acc, val) => ({\n      ...acc,\n      ...val\n    }),\n    {}\n  );\n","class Square {\n  constructor(row, col, piece = null) {\n    this.row = row;\n    this.col = col;\n    this.piece = piece;\n    this.isLight = (row + col) % 2 === 0;\n    this.up = null;\n    this.down = null;\n    this.left = null;\n    this.right = null;\n  }\n\n  setNeighbours(up, down, left, right) {\n    this.up = up;\n    this.down = down;\n    this.left = left;\n    this.right = right;\n  }\n\n  removePiece() {\n    this.piece = null;\n  }\n\n  setPiece(piece) {\n    this.piece = piece;\n  }\n}\n\nexport default Square;\n","class Piece {\n  constructor(piece, player, square) {\n    this.player = player;\n    this.name = piece.name;\n    this.symbol = piece.symbol;\n    this.square = square;\n  }\n\n  changeSquare(square) {\n    this.square = square;\n  }\n}\n\nexport default Piece;\n","export const pieces = {\n  king: {\n    symbol: \"♚\",\n    name: \"king\"\n  },\n  queen: {\n    symbol: \"♛\",\n    name: \"queen\"\n  },\n  rook: {\n    symbol: \"♜\",\n    name: \"rook\"\n  },\n  bishop: {\n    symbol: \"♝\",\n    name: \"bishop\"\n  },\n  knight: {\n    symbol: \"♞\",\n    name: \"knight\"\n  },\n  pawn: {\n    symbol: \"♟\",\n    name: \"pawn\"\n  }\n};\n\nconst { rook, knight, bishop, queen, king } = pieces;\n\nexport const specialRow = [\n  rook,\n  knight,\n  bishop,\n  queen,\n  king,\n  bishop,\n  knight,\n  rook\n];\n","import Square from \"./Square\";\nimport Piece from \"./Piece\";\nimport { pieces, specialRow } from \"../data\";\n\nclass Game {\n  constructor() {\n    this.board = [];\n    for (let i = 1; i <= 8; i++) {\n      let arr = [];\n      for (let j = 1; j <= 8; j++) {\n        let piece = null;\n        const square = new Square(i, j);\n        if (i === 1) {\n          piece = new Piece(specialRow[j - 1], 1, square);\n        } else if (i === 8) {\n          piece = new Piece(specialRow[8 - j], 2, square);\n        } else if (i === 2) {\n          piece = new Piece(pieces.pawn, 1, square);\n        } else if (i === 7) {\n          piece = new Piece(pieces.pawn, 2, square);\n        }\n        square.setPiece(piece);\n        arr.push(square);\n      }\n      this.board.push(arr);\n    }\n\n    for (let i = 0; i < 8; i++) {\n      for (let j = 0; j < 8; j++) {\n        const square = this.board[i][j];\n        const up = i - 1 >= 0 ? this.board[i - 1][j] : null;\n        const down = i + 1 < 8 ? this.board[i + 1][j] : null;\n        const left = j - 1 >= 0 ? this.board[i][j - 1] : null;\n        const right = j + 1 < 8 ? this.board[i][j + 1] : null;\n        square.setNeighbours(up, down, left, right);\n      }\n    }\n  }\n}\n\nexport default Game;\n","const movePawn = (clickedPiece, nextSquare, moveSuccessfully) => {\n  const currentSquare = clickedPiece.square;\n\n  const rule = () => {\n    const player1Rule =\n      clickedPiece.player === 1 && // if player1, then rules apply\n      ((currentSquare.row === 2 && // if on first sq, then double jump possible\n        (currentSquare.down.down === nextSquare || // check if double jump\n          currentSquare.down === nextSquare)) || // check if single jump\n        currentSquare.down === nextSquare); // if not on 1st sq, check if single jump\n\n    const player2Rule =\n      clickedPiece.player === 2 && // if player2, then rules apply\n      ((currentSquare.row === 7 &&\n        (currentSquare.up.up === nextSquare ||\n          currentSquare.up === nextSquare)) ||\n        currentSquare.up === nextSquare);\n\n    const noPieceMovement =\n      nextSquare.piece === null && (player1Rule || player2Rule);\n\n    const player1Attack =\n      currentSquare.down.right === nextSquare ||\n      currentSquare.down.left === nextSquare;\n\n    const player2Attack =\n      currentSquare.up.right === nextSquare ||\n      currentSquare.up.left === nextSquare;\n\n    const attackingMovement =\n      nextSquare.piece !== null && (player1Attack || player2Attack);\n\n    return noPieceMovement || attackingMovement;\n  };\n\n  if (rule()) moveSuccessfully();\n};\n\nexport default movePawn;\n","import movePawn from \"./pawn\";\n\nconst movePiece = (clickedPiece, square, setClickedPiece, setPlayer1Turn) => {\n  const moveSuccessfully = () => {\n    // remove piece from original square\n    clickedPiece.square.removePiece();\n    // let piece know which square it will be placed in\n    clickedPiece.changeSquare(square);\n    // let square know that piece has moved on to it\n    square.setPiece(clickedPiece);\n    // remove clickedPiece from state\n    setClickedPiece(null);\n    // change player turn\n    setPlayer1Turn(prev => !prev);\n  };\n\n  switch (clickedPiece.name) {\n    case \"pawn\":\n      movePawn(clickedPiece, square, moveSuccessfully);\n      break;\n    default:\n      moveSuccessfully();\n  }\n};\n\nexport default movePiece;\n","const selectPiece = (p1Turn, square, setClicked) => {\n  const rule = () =>\n    (p1Turn && square.piece.player === 1) ||\n    (!p1Turn && square.piece.player === 2);\n\n  if (square.piece !== null && rule()) setClicked(square.piece);\n};\n\nexport default selectPiece;\n","import React, { useState, useCallback } from \"react\";\n\nimport useClientDimensions from \"./hooks/useClientDimensions\";\nimport { fullVS, center, c, fRow } from \"./styles\";\nimport { stylizer } from \"./utils\";\nimport Game from \"./classes/Game\";\nimport movePiece from \"./rules\";\nimport selectPiece from \"./rules/select\";\n\nconst App = () => {\n  const { vw, vh } = useClientDimensions();\n  const [game, setGame] = useState(new Game());\n  const [clickedPiece, setClickedPiece] = useState(null);\n  const [player1Turn, setPlayer1Turn] = useState(true);\n\n  // Logging game state\n  // console.log(game);\n\n  const handleClick = useCallback(\n    square => {\n      if (\n        clickedPiece === null || // check if a piece has not been clicked upon yet\n        (square.piece !== null && square.piece.player === (player1Turn ? 1 : 2))\n        // or check if player changes his mind and wants to move some other piece\n      ) {\n        // check for rules to select a piece\n        selectPiece(player1Turn, square, setClickedPiece);\n      } else {\n        // check for rules to move a piece\n        movePiece(clickedPiece, square, setClickedPiece, setPlayer1Turn);\n      }\n    },\n    [clickedPiece, player1Turn]\n  );\n\n  if (vw < 800 || vh < 600) {\n    return (\n      <div style={stylizer([fullVS, center])}>\n        Sorry, App only works on screens larger than 800px wide and 600px high\n      </div>\n    );\n  }\n\n  return (\n    <div style={stylizer([fullVS, center, { background: c.gray }])}>\n      <div style={stylizer([{ width: \"600px\", height: \"600px\" }])}>\n        {game.board.map((row, id) => (\n          <div\n            key={id}\n            style={stylizer([\n              {\n                width: \"100%\",\n                height: \"75px\"\n              },\n              fRow\n            ])}\n          >\n            {row.map((square, id) => (\n              <div\n                key={id}\n                onClick={() => handleClick(square)}\n                style={stylizer([\n                  {\n                    width: \"75px\",\n                    height: \"75px\",\n                    background: square.isLight ? c.white : c.blue,\n                    cursor: \"pointer\",\n                    position: \"relative\"\n                  },\n                  center\n                ])}\n              >\n                {clickedPiece !== null && clickedPiece === square.piece ? (\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      width: \"100%\",\n                      height: \"100%\",\n                      background: square.piece.player === 1 ? c.lRed : c.lBlack\n                    }}\n                  />\n                ) : null}\n                {square.piece ? (\n                  <div\n                    style={{\n                      fontSize: \"50px\",\n                      color: square.piece.player === 1 ? c.red : c.black\n                    }}\n                  >\n                    {square.piece.symbol}\n                  </div>\n                ) : null}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}